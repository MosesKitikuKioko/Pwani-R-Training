y="Percent",
x='')+
#caption = "Josiah Mwandaza \n Clinincal Report\n @mariestops Kenya")+
theme(legend.position = "bottom",
legend.title =  element_blank(),
legend.text = element_text(family = "serif"),
plot.title = element_text(hjust = 0.5,family = "serif"),
axis.text = element_text(family = "serif"),
axis.title = element_text(family = "serif"),
axis.text.x = element_text(angle = 25, size=10),
plot.subtitle = element_text(family = "serif",face = "italic",hjust = 0.5))
#save the plot
ggsave(plot= plot_II,
height = 8.1,
width = 15.8,
dpi = 1000,
device = 'jpg',
filename = 'Quarter IV Average Performance per Center.jpg')
data<- import("PAFP PP.xlsx")
library(readxl)
data<- read_excel("PAFP PP.xlsx")
View(data)
data_q2<- read_excel("PAFP PP.xlsx")
View(data_q2)
source('D:/Josaih/Josiah Jul Sep analysis.R', echo=TRUE)
#clean data
data_q2<-data_q2 %>%
select_all(tolower)
View(data_q2)
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility))))
View(data_q2)
names(data_q2)
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
rename(`q2 performance`=`q2 pafp score`) %>%
mutate(`q2 performance`=`q2 performance`*100)
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
rename(`q2 performance`=`q2 pafp score`) %>%
mutate(`q2 performance`=(`q2 performance`)*100))
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
rename(`q2 performance`=`q2 pafp score`)
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(`q2 performance`=`q2 pafp score`) %>%
mutate(`q2 pafp score`=(`q2 pafp score`)*100))
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
rename(q2=`q2 pafp score`)
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100)
View(data_q2)
mutate(q2_performance=q2_performance*100)
#Read quarter
data_q2<- read_excel("PAFP PP.xlsx")
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
rename(q2_performance=`q2 pafp score`)
#Read quarter
data_q2<- read_excel("PAFP PP.xlsx")
#clean data
data_q2<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100)
View(data_q2)
View(Josiah_II)
View(Josiah_II)
#Read quarter
data_q2<- read_excel("PAFP PP.xlsx")
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
#save the plot
ggsave(plot= plot_II,
height = 8.1,
width = 15.8,
dpi = 1000,
device = 'jpg',
filename = 'Quarter IV Average Performance per Center.jpg')
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
separate(facility,sep = ' ')
#Read quarter
data_q2<- read_excel("PAFP PP.xlsx")
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
separate(facility,sep = ' ')
View(data_q2)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
separate(facility,sep = '')
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
separate(facility,sep = '',into = SDP)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
separate(facility,sep = '',into = 'SDP')
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
separate(facility,sep = '',into = c('SDP','x1','x2'))
View(data_q2_)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
separate(facility,sep = '')
View(data_q2_)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
separate(facility,sep = ' ',into = 'SDP')
View(data_q2_)
View(Josiah_II)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
separate(SDP,sep = ' ',into = 'SDP')
separate(SDP,sep = ' ',into = c('SDP','center')
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
separate(SDP,sep = ' ',into = c('SDP','center'))
names(Josiah_II)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
separate(SDP,sep = ' ',into = c('name','center'))
Josiah_II_1 <- Josiah_II
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
separate(SDP,sep = ' ',into = c('name','center'))
library(splitstackshape)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
cSplit(SDP,sep = ' ')
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
cSplit(SDP,sep = '')
View(Josiah_II)
View(Josiah_II)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
cSplit(SDP)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
cSplit_e(SDP)
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
cSplit_e(SDP,sep='')
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
Josiah_II_1 <- Josiah_II %>%
cSplit_e(SDP,sep=' ')
View(data_q2)
View(data_q2_)
#clear working space
rm(list = ls())
#set working directory
setwd("D:\\Josaih")
#library
library(tidyverse)
library(reshape)
library(extrafont)
library(viridis)
library(readxl)
library(splitstackshape)
loadfonts(device = "win")
#read the data
Josiah<-read_csv("josiah current.csv")
#clean the data
Josiah<- Josiah %>%
mutate(SDP=str_trim(str_squish(str_to_title(SDP)))) %>%
select(SDP, Jul='Jul-20',Aug='Aug-20',Sep='Sep-20')
#slipt data calculate the average
Josiah_I<- Josiah %>%
pivot_longer(Jul:Sep,names_to='Month',values_to='Percent') %>%
arrange(SDP)
#avearge data clean up
Josiah_II<- Josiah %>%
mutate(Average = round((Jul+Aug+Sep)/3,1)) %>%
select(SDP ,Average) %>%
arrange(desc(Average))
#plot the data
plot_I<-Josiah_I %>%
ggplot(aes(reorder(SDP,Percent),Percent,fill= Month))+
geom_col(position = "dodge",width = 0.6)+
#geom_text(aes(label=Percent),color="steelblue",size=3,fill='white',hjust=1)+
#geom_text(aes(label = Percent),color="#000000",fill="white",vjust=0.5,hjust=1.2,cex=2.5)+
#coord_flip()+
scale_fill_viridis_d()+
theme_minimal(base_family = "serif")+
labs(title = "SDP Performance",
subtitle = 'Performance in July, August and September',
y="Percent",
x='')+
#caption = "Josiah Mwandaza \n Clinincal Report\n @mariestops Kenya")+
theme(legend.position = "bottom",
legend.title =  element_blank(),
legend.text = element_text(family = "serif"),
plot.title = element_text(hjust = 0.5,family = "serif"),
axis.text = element_text(family = "serif"),
axis.title = element_text(family = "serif"),
axis.text.x = element_text(angle = 25, size=10),
plot.subtitle = element_text(family = "serif",face = "italic",hjust = 0.5))
#plots for averages
#select the colors
green_color=c('Kakamega Centre','Kangemi Centre')
red_color =c('Marie Stopes Premier Clinic','Kenyatta Centre')
#subset the data
green_data <- Josiah_II %>% subset(SDP %in% green_color)
red_data <- Josiah_II %>% subset(SDP %in% red_color)
#plot
plot_II<-Josiah_II %>%
ggplot(aes(SDP,Average))+
geom_col(position = "dodge",width = 0.6)+
#draw the intercept
geom_hline(yintercept = 80, linetype="dashed", color="#52854C",size=0.5)+
#highlight under performing clinics
geom_bar(data=red_data,aes(SDP,Average), cex=0.9,stat ="identity",fill="#ff0000",width = 0.6)+
#highlight performing clinics
geom_bar(data=green_data,aes(SDP,Average), cex=0.9,stat ="identity",fill="#008000",width = 0.6)+
#fill in the labels
geom_text(aes(label=Average),size=3,color="white",vjust=1.5)+
#annotate the text
annotate("text",x=6.5,
y=95,
label ="80% Target for all Medical Facilities",
size = 4,
#color = "gray80",
family = "serif")+
#draw the curve
annotate(geom ="curve",
x = 8,
y = 80,
xend = 8,
yend = 93.5,
curvature = 0.35,
color = "#2F4F4F",
arrow = arrow(length = unit(2, "mm"), type = "closed"))+
theme_minimal(base_family = "serif")+
labs(title = "SDP Performance",
subtitle = 'Quarter III 2020 Average Performance per Center',
y="Percent",
x='')+
#caption = "Josiah Mwandaza \n Clinincal Report\n @mariestops Kenya")+
theme(legend.position = "bottom",
legend.title =  element_blank(),
legend.text = element_text(family = "serif"),
plot.title = element_text(hjust = 0.5,family = "serif"),
axis.text = element_text(family = "serif"),
axis.title = element_text(family = "serif"),
axis.text.x = element_text(angle = 25, size=10),
plot.subtitle = element_text(family = "serif",face = "italic",hjust = 0.5))
#Read quarter
data_q2<- read_excel("PAFP PP.xlsx")
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100) %>%
#save the plot
ggsave(plot= plot_II,
height = 8.1,
width = 15.8,
dpi = 1000,
device = 'jpg',
filename = 'Quarter III Average Performance per Center.jpg')
#clean data
data_q2_<-data_q2 %>%
select_all(tolower) %>%
mutate(facility=str_squish(str_trim(str_to_title(facility)))) %>%
#rename(q2_performance=`q2 pafp score`)
mutate(`q2 pafp score`=`q2 pafp score`*100)
#save the plot
ggsave(plot= plot_II,
height = 8.1,
width = 15.8,
dpi = 1000,
device = 'jpg',
filename = 'Quarter III Average Performance per Center.jpg')
library(splitstackshape)
library(lubridate)
library(Amelia)
install.packages('Amelia',dependencies = TRUE)
data <- read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-07-07/coffee_ratings.csv')
library(readr)
data <- read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-07-07/coffee_ratings.csv')
View(data_q2)
View(data_q2)
View(data)
View(data)
library(janitor)
library(tidyverse)
#clear working space
rm(list=ls())
library(tidyverse)
raw_arabica <- read_csv("https://raw.githubusercontent.com/jldbc/coffee-quality-database/master/data/arabica_data_cleaned.csv") %>%
janitor::clean_names()
View(raw_arabica)
raw_robusta <- read_csv("https://raw.githubusercontent.com/jldbc/coffee-quality-database/master/data/robusta_data_cleaned.csv",
col_types = cols(
X1 = col_double(),
Species = col_character(),
Owner = col_character(),
Country.of.Origin = col_character(),
Farm.Name = col_character(),
Lot.Number = col_character(),
Mill = col_character(),
ICO.Number = col_character(),
Company = col_character(),
Altitude = col_character(),
Region = col_character(),
Producer = col_character(),
Number.of.Bags = col_double(),
Bag.Weight = col_character(),
In.Country.Partner = col_character(),
Harvest.Year = col_character(),
Grading.Date = col_character(),
Owner.1 = col_character(),
Variety = col_character(),
Processing.Method = col_character(),
Fragrance...Aroma = col_double(),
Flavor = col_double(),
Aftertaste = col_double(),
Salt...Acid = col_double(),
Balance = col_double(),
Uniform.Cup = col_double(),
Clean.Cup = col_double(),
Bitter...Sweet = col_double(),
Cupper.Points = col_double(),
Total.Cup.Points = col_double(),
Moisture = col_double(),
Category.One.Defects = col_double(),
Quakers = col_double(),
Color = col_character(),
Category.Two.Defects = col_double(),
Expiration = col_character(),
Certification.Body = col_character(),
Certification.Address = col_character(),
Certification.Contact = col_character(),
unit_of_measurement = col_character(),
altitude_low_meters = col_double(),
altitude_high_meters = col_double(),
altitude_mean_meters = col_double()
)) %>%
janitor::clean_names() %>%
rename(acidity = salt_acid, sweetness = bitter_sweet,
aroma = fragrance_aroma, body = mouthfeel,uniformity = uniform_cup)
View(raw_robusta)
all_ratings <- bind_rows(raw_arabica, raw_robusta) %>%
select(-x1) %>%
select(total_cup_points, species, everything())
View(all_ratings)
all_ratings %>%
skimr::skim()
all_ratings %>%
write_csv("2020/2020-07-07/coffee_ratings.csv")
View(raw_arabica)
library(devtools)
install_github("rfishbase", "ropensci")
remotes::install_github("ropensci/rfishbase")
library(remotes)
remotes::install_github("ropensci/rfishbase")
devtools::install_github("ropensci/rfishbase")
remotes::install_git("ropensci/rfishbase")
setwd('D:/pwani data collection')
load(file = 'fishbase.rda')
View(fishbase)
library(tidyverse)
---
title: "Kwingu Data Audit"
author: "Moses Kioko"
output:
html_document:
theme: cerulean
highlight: textmate
fontsize: 8pt
toc: true
number_sections: true
code_download: true
toc_float:
collapsed: false
---
install.packages('prettydoc',dependencies = TRUE)
library(prettydoc)
library(tidyverse)
# install remotes or devtools
install.packages('devtools', dependencies = TRUE)
install.packages('remotes', dependencies = TRUE)
# installing specific packages in r from github
devtools::install_github()
# install remotes or devtools
install.packages('devtools', dependencies = TRUE)
install.packages('remotes', dependencies = TRUE)
#load the packages
library(remotes) # or
library(devtools)
# installing specific packages in r from github
devtools::install_github("tidyverse/tidyverse")
install.packages("devtools", dependencies = TRUE)
library(devtools)
#load the packages
library(remotes) # or
# install remotes or devtools
#install.packages('devtools', dependencies = TRUE)
#install.packages('remotes', dependencies = TRUE)
#load the packages
library(remotes) # or
library(devtools)
# installing specific packages in r from github
devtools::install_github("tidyverse/tidyverse")
